# 业务描述
简易版论坛系统<br>
主要分三大角色：管理员，博客主，游客
按角色区分功能
管理员：用户管理、文章管理、专题管理、用户登录日志、浏览记录、友情链接
博客主：个人信息管理、类目管理、文章管理、专题管理、粉丝查看、关注管理、文章收藏管理、点赞文章管理、评价管理、点赞文章、收藏文章、关注用户、评价文章
游客：首页、文章列表、专题页、文章详情

辅助功能有数据分析(PV/UV等),黑名单(IP限制),友情链接<br>
后续可继续迭代，网站访问分析，访问行为分析，推文等功能

# 功能点

## 用户
### 用户注册
用户填写基本信息进行注册<br>
目前提供 用户名注册、邮箱注册<br>
后期迭代：同一个ip十五分钟内重复注册，则需要填写校验码
#### 用户名注册
填写用户名、密码进行注册<br>
填写信息

* 用户名
* 密码

校验

1. 用户名校验（用户名重复，特殊字符）
2. 密码强度校验（不能与昵称一致）

#### 邮箱注册（暂不支持）
用户填写邮箱获取密码设置链接，点开链接后，设置密码<br>
填写信息
* 邮箱
* 密码

### 用户登录
用户通过用户名(邮箱)密码登录，如果5分钟内失败5次以上，需要填写校验码<br>

填写信息

* 用户名（邮箱）
* 密码
* 校验码（非必填）

校验

1. 用户名校验
2. 密码校验

数据记录

* 记录每一次的登录ip以及时间

### 用户信息维护
用户维护基本信息，包括以下几项

* 昵称
* 邮箱
* 手机号
* 头像（默认通过 secure.gravatar.com 自动获取）
* 主页
* 性别
* 真实姓名
* 出生日期
* 故乡
* 简介
* 职业

### 密码修改
用户根据原密码修改密码

后期扩展：密码安全问题、邮箱验证码、手机验证码

### 忘记密码
通过邮箱链接重置密码

### 管理员 - 用户管理
管理员冻结或解冻用户

## 分类
用户管理自己的分类，获取所有分类展示在侧边栏，允许新增、编辑、删除
### 分类展示
侧边栏展示

### 分类创建
创建文章的分类，便于后续文章筛选管理<br>

填写字段

* 分类名称

校验

1. 当前用户下是否存在相同名称类目

### 分类编辑
修改分类名称

### 分类删除
删除不用的分类，如果存在文章关联，禁止删除

## 文章
### 管理员 - 文章列表
用户后台管理文章<br>

展示字段

* id
* 作者
* 标题
* 浏览/点赞
* 收藏/评价（暂无）
* 权限
* 创建时间
* 操作
	* 权限为私有时：编辑，设为公开，删除
	* 权限为共有时：编辑，设为私有，删除

搜索条件

* 标题
* 作者
* 创建时间（开始 ~ 结束）

### 博客主 - 文章列表
用户后台管理文章<br>

展示字段

* 标题（查出部分...）
* 浏览/点赞
* 收藏/评价
* 权限
* 创建时间
* 操作
	* 权限为私有时：编辑，设为公开，删除
	* 权限为共有时：编辑，设为私有，删除

搜索条件

* 标题
* 创建时间（开始 ~ 结束）

### 新建文章
用户新建文章，用户可以选择富文本编辑器也可以选择markdown编辑器，默认富文本<br>

填写内容

* 标题
* 分类（下拉选择）
* 内容
* 文章权限：1.公开，0.私有

#### 富文本文章
使用富文本编辑器实现文章内容编辑

#### markdown
使用markdown形式实现文章内容编辑<br>

后端需要生成文章内容简介，根据规则从文本中截取部分文字

### 编辑文章
用户编辑文章，根据文章内容类型，选择对应的编辑器渲染<br>

填写内容

* 标题
* 分类（下拉选择）
* 内容

#### 富文本文章
使用富文本编辑器实现文章内容编辑

#### markdown
使用markdown形式实现文章内容编辑<br>

后端需要生成文章内容简介，根据规则从文本中截取部分文字

### 编辑文章权限
设置文章权限为公开或私有

### 删除文章
删除文章（逻辑删除）
        
## 4、浏览量
前端固定请求后端数据采集接口，后端进行数据采集<br>

数据

* URL
* ip地址（如果路由后不能获取正确的ip地址等信息则需要传ip）

后端全局监听浏览量，监听api的请求记录（文章记录）<br>
前端控制页面数据采集（需要确认，通过前端路由后是否能够获取正确的ip地址）

## 5、收藏（TODO）
    - 文章收藏
        - 仅限登录用户

## 6、点赞（TODO）
    - 文章点赞
        - 相同ip或相同用户不重复记录
        
## 7、评论（TODO）
    - 文章评论
        - 无限级评论

## 8、说说（TODO）
    - 说说
        - 内容
        - 图片
        - 评论
        - 点赞
        - 时间戳

## 9、相册（TODO）
    - 相册
        - 标题，标签，图片数量，密码，是否可见
    - 照片
    

## 10、数据统计（TODO）
    - pv
    - uv
    - 有效用户率
    - 文章浏览量排行榜
    - 相册浏览量排行榜

## 11、配置（TODO）
### 11.1、友情链接管理
#### 1)列表
友情链接分页<br>

展示字段

* 网站名称
* 链接
* 是否展示
* 优先级
* 操作
	* 隐藏时：显示，删除
	* 显示时：隐藏，删除

全局操作<br>
优先级设置：页面展示所有友情链接，通过上下移动控制优先级，传给后端时，按照列表编号，从1开始，递增

#### 2)创建友情链接
添加友情链接，默认不展示<br>

填写内容

* 网站名称
* 链接

#### 3)编辑友情链接
编辑友情链接<br>

填写内容

* 网站名称
* 链接

#### 4)显示/隐藏
设置友情链接为显示或隐藏

#### 5)删除友情链接
物理删除友情链接

### 11.2、邮件(TODO)
    - 邮件
        - 配置
        - 发送，富文本
### 11.3、黑名单(TODO)
    - 黑名单
        - 恶意ip屏蔽
    


# 三、数据库设计

## 1、表设计

## 2、执行SQL

